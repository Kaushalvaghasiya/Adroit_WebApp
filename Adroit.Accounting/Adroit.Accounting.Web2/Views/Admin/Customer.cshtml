@using Adroit.Accounting.Model.Enums
@model Adroit.Accounting.Model.Customer
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="dv-list side-app">
    <!-- page-header -->
    <div class="row">
        <div class="col-md-12 col-lg-12">
            <div class="page-header">
                <ol class="breadcrumb breadcrumb-arrow">
                    <li><a href="#">Master</a></li>
                    <li><a href="#">Adroit</a></li>
                    <li><a href="#">Customer</a></li>
                    <li class="active"><span>List</span></li>
                </ol>
                <div class="ml-auto">
                    <div class="input-group">
                        <a href="#" class="btn btn-secondary text-white mr-2 btn-sm" data-toggle="tooltip" title="" data-placement="bottom" data-original-title="Bookmark this page">
                            <span>
                                <i class="fa fa-star"></i>
                            </span>
                        </a>
                        <a href="lockscreen.html" class="btn btn-primary text-white mr-2 btn-sm" data-toggle="tooltip" title="" data-placement="bottom" data-original-title="lock">
                            <span>
                                <i class="fa fa-lock"></i>
                            </span>
                        </a>
                        <a href="#" class="btn-add-new btn btn-warning text-white btn-sm" data-toggle="tooltip" title="" data-placement="bottom" data-original-title="Add New" id="AddNew">
                            <span>
                                <i class="fa fa-plus"></i>
                            </span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End page-header -->
    <!-- row -->
    <div class="row">
        <div class="col-md-12 col-lg-12">
            <div class="card">
                <div class="card-header">
                </div>
                <div class="card-body pt-0">
                    <div class="table-responsive">
                        <table id="tblMain" class="table table-bordered key-buttons text-wrap">
                            <thead>
                                <tr>
                                    <th class="border-bottom-0">CUSTOMER</th>
                                    <th class="border-bottom-0">TYPE</th>
                                    <th class="border-bottom-0">CITY</th>
                                    <th class="border-bottom-0">MOBILE</th>
                                    <th class="border-bottom-0"> #FIRMs</th>
                                    <th class="border-bottom-0 text-center" style="width:190px!important;">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- row end -->
</div>
<div class="dv-detail side-app">
    <!-- page-header -->
    <div class="row">
        <div class="col-lg-12 col-xl-12 col-md-12 col-sm-12">
            <div class="page-header">
                <ol class="breadcrumb breadcrumb-arrow">
                    <li><a href="#">Master</a></li>
                    <li><a href="#">Adroit</a></li>
                    <li><a href="#" onclick="viewList()">Customer</a></li>
                    <li class="active"><span id=activeTabName>Add</span></li>
                </ol>
                <div class="ml-auto">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search Customer...">
                        <span class="input-group-append mr-2">
                            <button class="btn btn-primary" type="button">Go!</button>
                        </span>
                        <a href="javascript:void(0);" class="btn btn-primary text-white mr-2 btn-sm cls-a-disable" data-toggle="tooltip" title="" data-placement="bottom" data-original-title="Save" onclick="saveDetail()">
                            <span>
                                <i class="fa fa-save"></i>
                            </span>
                        </a>
                        <a href="#" class="btn btn-blue text-white mr-2 btn-sm" data-toggle="tooltip" title="" data-placement="bottom" data-original-title="Print">
                            <span>
                                <i class="fa fa-print"></i>
                            </span>
                        </a>
                        <a href="#" class="btn btn-success text-white mr-2 btn-sm" data-toggle="tooltip" title="" data-placement="bottom" data-original-title="Send">
                            <span>
                                <i class="fa fa-share-alt"></i>
                            </span>
                        </a>
                        <a href="#" class="btn btn-danger text-white mr-2 btn-sm" data-toggle="tooltip" title="" data-placement="bottom" data-original-title="delete">
                            <span>
                                <i class="fa fa-trash-o"></i>
                            </span>
                        </a>
                        <a href="javascript:void(0);" class="btn-add-new btn btn-warning text-white mr-2 btn-sm" data-toggle="tooltip" title="" data-placement="bottom" data-original-title="New">
                            <span>
                                <i class="fa fa-plus"></i>
                            </span>
                        </a>
                        <a href="javascript:void(0);" class="btn-back btn btn-gray text-white btn-sm" data-toggle="tooltip" title="" data-placement="bottom" data-original-title="Cancel" onclick="fromReset()">
                            <span>
                                <i class="fa fa-arrow-left"></i>
                            </span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End page-header -->
    <!-- row -->
    <div class="row">
        <div class="col-lg-12 col-xl-12 col-md-12 col-sm-12">
            <div class="card">
                <div class="card-header">
                    <!--<h3 class="card-title">Add/Edit Product</h3>-->
                </div>
                <div class="card-body">
                    <div class="row">

                        <div class="col-md-4">
                            <div class="form-group">
                                <input type="hidden" id="Id" value="0" />
                                <label for="CustomerName">Customer Name</label>
                                <input type="text" class="form-control cls-disable" id="CustomerName" placeholder="" maxlength="50">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="BusinessName">Business Name</label>
                                <input type="text" class="form-control cls-disable" id="BusinessName" placeholder="" maxlength="250">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Business">Business</label>
                                <select class="form-control select2-show-search cls-disable" id="Business">
                                </select>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="AddressLine1">Address Line 1</label>
                                <input type="text" class="form-control cls-disable" id="AddressLine1" placeholder="" maxlength="200">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="AddressLine2">Address Line 2</label>
                                <input type="text" class="form-control cls-disable" id="AddressLine2" placeholder="" maxlength="200">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="AddressLine3">Address Line 3</label>
                                <input type="text" class="form-control cls-disable" id="AddressLine3" placeholder="" maxlength="200">
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="State">State</label>
                                <select class="form-control select2-show-search cls-disable" id="State">
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="Pincode">Pincode</label>
                                <input type="text" class="form-control cls-disable numberonly " id="PinCode" placeholder="" maxlength="10">
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="ContactPerson">Contact Person</label>
                                <input type="text" class="form-control cls-disable" id="ContactPersonName" placeholder="" maxlength="100">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="City">City</label>
                                <select class="form-control select2-show-search cls-disable" id="City">
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="ContactMobile">Contact Mobile</label>
                                <input type="text" class="form-control numberonly cls-disable" id="ContactMobile" placeholder="" maxlength="15">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="AlternateMobile">Alternate Mobile</label>
                                <input type="text" class="form-control numberonly cls-disable" id="AlternateMobile" placeholder="" maxlength="15">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Phone#">Phone#</label>
                                <input type="text" class="form-control numberonly cls-disable" id="Phone" placeholder="" maxlength="20">
                            </div>
                        </div>
                        <div class="col-md-8">
                            <div class="form-group">
                                <label for="Email">Email</label>
                                <input type="text" class="form-control cls-disable" id="Email" placeholder="" maxlength="50">
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="Requirements">Requirements</label>
                                <input type="text" class="form-control cls-disable" id="Requirements" placeholder="">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="Type">Type</label>
                                <select asp-for="CustomerType"
                                        class="form-control cls-disable" id="Type"
                                        asp-items="Html.GetEnumSelectList<CustomerType>()">
                                    <option value=0>Select type ...</option>
                                </select>

                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="TotalFirms">Total Firms</label>
                                <input type="text" class="form-control numberonly cls-disable" id="TotalFirms" placeholder="">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="TotalUsers">Total Users</label>
                                <input type="text" class="form-control numberonly cls-disable" id="TotalUsers" placeholder="">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="AadhaarUID">Aadhaar UID</label>
                                <input type="text" class="form-control cls-disable" id="AadhaarId" placeholder="" maxlength="12">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div><label for="Active">Active</label></div>
                            <label class="custom-switch">
                                <input type="checkbox" name="custom-switch-checkbox" id="Active" class="custom-switch-input cls-disable">
                                <span class="custom-switch-indicator"></span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="card-footer text-right">
                    <a href="javascript:void(0);" class="btn btn-primary mt-1 cls-a-disable" data-toggle="tooltip" title="" data-placement="top" data-original-title="Save" onclick="saveDetail()"><i class="fa fa-save"></i>&nbsp;Save</a>
                    <a href="#" class="btn btn-blue mt-1" data-toggle="tooltip" title="" data-placement="top" data-original-title="Print"><i class="fa fa-print"></i>&nbsp;Print</a>
                    <a href="#" class="btn btn-success mt-1" data-toggle="tooltip" title="" data-placement="top" data-original-title="Send"><i class="fa fa-share-alt"></i>&nbsp;Send</a>
                    <a href="#" class="btn btn-danger mt-1" data-toggle="tooltip" title="" data-placement="top" data-original-title="Delete"><i class="fa fa-trash-o"></i>&nbsp;Delete</a>
                    <a href="#" class="btn-back btn btn-warning mt-1" data-toggle="tooltip" title="" data-placement="top" data-original-title="Cancel"><i class="fa fa-plus"></i>&nbsp;New</a>
                    <a href="javascript:void(0);" class="btn-back btn btn-gray mt-1" data-toggle="tooltip" title="" data-placement="top" data-original-title="Cancel" id="btnCancel"><i class="fa fa-arrow-left"></i>&nbsp;Cancel</a>
                </div>
            </div>
        </div>
    </div>
    <!-- row end -->
    <input type="hidden" id="hdnCityId" value=0 />
</div>

@section Scripts
    {

<script>

    var RESULT_SUCCESS = "@Adroit.Accounting.Utility.Constant.API_RESULT_SUCCESS";
    window.customerId=@ViewBag.Id

    $(function (e) {
        $('.dv-list').show();
        $('.dv-detail').hide();

        $('.btn-add-new').click(function () {
            $('.dv-list').slideUp();
            $('.dv-detail').slideDown();
        });

        $('.btn-back').click(function () {
            $('.dv-detail').slideUp();
            $('.dv-list').slideDown();
        });

        datatablelist();

        bindBusinessList();

        bindStateList();

        $("#State").on('change', function (e) {
            let stateId = $(this).val();
            if (stateId > 0) {
                bindCityList(stateId);
            }
        });
          if(window.customerId !=0){
            getDetail(window.customerId);
          }
    });

function viewList(){
    $("#btnCancel").click();
}
    function disableFieldView(id){
        $(".cls-disable").each(function(index, element){
            $(this).prop('disabled', true);
        });

        $(".cls-a-disable").each(function(index, element){
            $(this).addClass("anchordisabled");
        });
        getDetail(id);

    }
    function EditMode(id){
        $(".cls-disable").each(function(index, element){
             $(this).prop('disabled', false);
        })
        $(".cls-a-disable").each(function(index, element){
            $(this).removeClass("anchordisabled");
        })

        getDetail(id);
    }
    function refreshDatatableList() {
        $('#tblMain').DataTable().ajax.reload();
    }

    function datatablelist() {
        let columns = [];
        let colDef = [];
        colDef.push({
            "render": function (data, type, row) {
                return row.name;
            },
            "targets": colDef.length,
        });
        colDef.push({
            "render": function (data, type, row) {
                return row.customerType;
            },
            "targets": colDef.length,
        });
        colDef.push({
            "render": function (data, type, row) {
                return row.city;
            },
            "targets": colDef.length,
        });
        colDef.push({
            "render": function (data, type, row) {
                return row.mobile;
            },
            "targets": colDef.length,
        });
        colDef.push({
            "render": function (data, type, row) {
                return row.totalFirm;
            },
            "targets": colDef.length,
        });
        colDef.push({
            "render": function (data, type, row) {
                let btnAct = "<div class='btn-list'><a onclick='EditMode(" + row.id + ");' href='javascript:void(0);' class='btn btn-outline-warning small-icon-btn' data-toggle='tooltip' title='' data-placement='bottom' data-original-title='Edit'><i class='fa fa-pencil'></i></a>";
                btnAct += "&nbsp;&nbsp; <a href='#'onclick='disableFieldView(" + row.id + ");' class='btn btn-outline-info small-icon-btn' data-toggle='customer firm' title='' data-placement='bottom' data-original-title='View'><i class='fa fa-info'></i></a>";
                btnAct += "<a target='_blank' href='@(Url.Content("~/admin/customer/firm?id="))"+row.id+"' class='btn btn-outline-info small-icon-btn' data-toggle='customer firm' title='' data-placement='bottom' data-original-title='View'><i class='fa fa-group'></i></a>";
                btnAct += "<a target='_blank' href='@(Url.Content("~/admin/customer/user?id="))"+row.id+"' class='btn btn-outline-info small-icon-btn' data-toggle='customer firm' title='' data-placement='bottom' data-original-title='View'><i class='fa-light fa-users'></i></a>";
                btnAct += "<a onclick='customerDelete(" + row.id + ");' href='javascript:void(0);' class='btn btn-outline-danger small-icon-btn' data-toggle='tooltip' title='' data-placement='bottom' data-original-title='Delete'><i class='fa fa-trash-o'></i></a></div>";
                return btnAct;
            },
            "targets": colDef.length,
            "className": "text-center",
        });

        columns.push({ "data": "Name", "name": "Name" });
        columns.push({ "data": "CustomerType", "name": "CustomerType" });
        columns.push({ "data": "City", "name": "City" });
        columns.push({ "data": "Mobile", "name": "Mobile" });
        columns.push({ "data": "TotalFirm", "name": "TotalFirm" });
        columns.push({ "data": "Id", "name": "Id" });

        var table = $('#tblMain').DataTable({
            "bAutoWidth": false,
            lengthChange: false,
            ordering: true,
            searching: true,
            paging: true,
            pageLength: 50,
            order: [[0, 'asc']],
            pagingType: 'full_numbers',
            orderClasses: false,
            //scrollCollapse: true,
            //stateSave: false,
            columnDefs: colDef,
            columns: columns,
            language: {
                paginate: {
                    next: '<i class="fa fa-angle-right"></i>', // or '→'
                    previous: '<i class="fa fa-angle-left"></i>', // or '←'
                    first: '<i class="fa fa-angle-double-left"></i>', // or '→'
                    last: '<i class="fa fa-angle-double-right"></i>' // or '←'
                }
            },
            buttons: ['copy', 'excel', 'pdf', 'colvis'],
            processing: true,
            serverSide: true,
            ajax: {
                url: '@(Url.Content("~/Admin/CustomerList"))',
                type: 'GET',
                data: function (d) { }
            },
            "initComplete": function(settings, json) {
                table.buttons().container().appendTo('#tblMain_wrapper .col-md-6:eq(0)');

                $(".buttons-copy").removeClass("btn-primary");
                $(".buttons-copy").addClass("btn-outline-primary");

                $(".buttons-excel").removeClass("btn-primary");
                $(".buttons-excel").addClass("btn-outline-primary");

                $(".buttons-pdf").removeClass("btn-primary");
                $(".buttons-pdf").addClass("btn-outline-primary");

                $(".buttons-colvis").removeClass("btn-primary");
                $(".buttons-colvis").removeClass("dropdown-toggle");
                $(".buttons-colvis").addClass("btn-outline-primary sub-icon");

                $(".buttons-copy").empty();
                $(".buttons-copy").append('<i class="fa fa-copy" data-toggle="tooltip" title="Copy" data-original-title="fa fa-copy"></i>');

                $(".buttons-excel").empty();
                $(".buttons-excel").append('<i class="fa fa-file-excel-o" data-toggle="tooltip" title="Excel" data-original-title="fa fa-file-excel-o"></i>');

                $(".buttons-pdf").empty();
                $(".buttons-pdf").append('<i class="fa fa-file-pdf-o" data-toggle="tooltip" title="PDF" data-original-title="fa fa-file-pdf-oo"></i>');

                $(".buttons-colvis").empty();
                $(".buttons-colvis").append('<i class="fa fa-eye" data-toggle="tooltip" title="Column Visibility" data-original-title="fa fa-eye"></i>');
            },
            "drawCallback": function (settings) {
            }
        });
    }


    function bindStateList(countryId) {
        try {
            blockUI('container');
            var retrundata = AjaxCall("GET", "@(Url.Content("~/Common/GetStates"))" + "?countryId=" + 1, "",
                function (data) {
                    unblockUI('container');
                    var str = "<option></option>";
                    str += "<option value='0'>Select State</option>";
                    if (data.result == RESULT_SUCCESS) {
                        if (data.data.length > 0) {
                            for (var i = 0; i < data.data.length; i++) {
                                str += ("<option value='" + data.data[i]['id'] + "'>" + data.data[i]["title"] + "</option>");
                            }
                        }
                        $("#State").html(str);
                    } else {
                        showError("", data.data);
                    }
                },
                function (error) {
                    unblockUI('container');
                    showError("", error.statusText);
                });
        }
        catch (err) {
            unblockUI('container');
            showError("", e.message);
        }
    }

    function bindCityList(stateId) {
        try {
            blockUI('container');
            var retrundata = AjaxCall("GET", "@(Url.Content("~/Common/GetCities"))" + "?stateId=" + stateId, "",
                function (data) {
                    unblockUI('container');
                    var str = "<option></option>";
                       str += "<option value='0'>Select city</option>";
                    if (data.result == RESULT_SUCCESS) {
                        if (data.data.length > 0) {
                            for (var i = 0; i < data.data.length; i++) {
                                str += ("<option value='" + data.data[i]['id'] + "'>" + data.data[i]["title"] + "</option>");
                            }
                        }
                        $("#City").html(str);
                    } else {
                        showError("", data.data);
                    }
                    if ($("#hdnCityId").val() != 0) {
                        $("#City").select2().val($("#hdnCityId").val()).trigger("change");
                    }
                },
                function (error) {
                    unblockUI('container');
                    showError("", error.statusText);
                });
        }
        catch (err) {
            unblockUI('container');
            showError("", e.message);
        }
    }

    function bindBusinessList() {
        try {
            blockUI('container');
            var retrundata = AjaxCall("GET", "@(Url.Content("~/Common/GetBusiness"))", "",
                function (data) {
                    unblockUI('container');
                    var str = "<option></option>";
                    if (data.result == RESULT_SUCCESS) {
                        if (data.data.length > 0) {
                            for (var i = 0; i < data.data.length; i++) {
                                str += ("<option value='" + data.data[i]['id'] + "'>" + data.data[i]["title"] + "</option>");
                            }
                        }
                        $("#Business").html(str);
                    } else {
                        showError("", data.data);
                    }
                },
                function (error) {
                    unblockUI('container');
                    showError("", error.statusText);
                });
        }
        catch (err) {
            unblockUI('container');
            showError("", e.message);
        }
    }

    function fromReset() {
        $("#Id").val(0);
        $("#CustomerName").val("");
        $("#AddressLine1").val("");
        $("#AddressLine2").val("");
        $("#AddressLine3").val("");
        $("#State").select2().val('').trigger("change");
        $("#City").select2().val('').trigger("change");
        $("#Business").select2().val('').trigger("change");
        $("#Type").val('');
        $("#BusinessName").val("");
        $("#PinCode").val("");
        $("#ContactPersonName").val("");
        $("#ContactMobile").val("");
        $("#AlternateMobile").val("");
        $("#Phone").val("");
        $("#Email").val("");
        $("#Requirements").val("");
        $("#TotalFirms").val("");
        $("#AadhaarId").val("");
        $("#TotalUsers").val("");
        $("#activeTabName").text("Add");

        $(".cls-disable").each(function(index, element){

        $(this).prop('disabled', false);
        });
        $(".cls-a-disable").each(function(index, element){

            $(this).removeClass("anchordisabled");
        });

        }

    function saveDetail() {
        try {

            if ($("#CustomerName").val().length <= 0 || $("#txtCustomerName").val() == "") {
                showWarning("", "Please enter name.");
                $("#CustomerName").focus();
                $('.dv-list').slideUp();
                return false;
            }
            if ($("#AddressLine1").val().length <= 0 || $("#AddressLine1").val() == "") {
                showWarning("", "Please enter address.");
                $("#AddressLine1").focus();
                $('.dv-list').slideUp();
                return false;
            }
            if ($("#State").val() == "" || $("#State").val() ==0) {
                showWarning("", "Please select state.");
                $("#State").focus();
                $('.dv-list').slideUp();
                return false;
            }
            if ($("#City").val() == "" || $("#City").val() ==0) {
                showWarning("", "Please select city.");
                $("#City").focus();
                $('.dv-list').slideUp();
                return false;
            }
            if ($("#ContactPersonName").val().length <= 0 || $("#ContactPersonName").val() == "") {
                showWarning("", "Please enter contact person name.");
                $("#ContactPersonName").focus();
                $('.dv-list').slideUp();
                return false;
            }
            if ($("#ContactMobile").val().length <= 0 || $("#ContactMobile").val() == "") {
                showWarning("", "Please enter contact mobile.");
                $("#ContactMobile").focus();
                $('.dv-list').slideUp();
                return false;
            }
            if ($("#Email").val().length <= 0 || $("#Email").val() == "") {
                showWarning("", "Please enter email.");
                $("#Email").focus();
                $('.dv-list').slideUp();
                return false;
            }
            if ($("#Business").val() == "") {
                showWarning("", "Please enter business.");
                $("#Business").focus();
                return false;
            }
            if ($("#Type").val() == "" || $("#Type").val() ==0 || $("#Type").val()==null) {
                showWarning("", "Please select customer type.");
                $("#Type").focus();
                return false;
            }
            if ($("#TotalUsers").val().length <= 0 || $("#TotalUsers").val() == "") {
                showWarning("", "Please enter total user.");
                $("#TotalUsers").focus();
                return false;
            }
            if ($("#BusinessName").val().length <= 0 || $("#BusinessName").val() == "") {
                showWarning("", "Please enter Business Name.");
                $("#txtTotalUsers").focus();
                return false;
            }

            let isValidemail = IsEmail($("#Email").val());
            if (!isValidemail) {
                showWarning("", "Please enter valid email");
                $("#Email").focus();
                return false;
            }

            var savedata = new Object();
            savedata.Id = parseInt($("#Id").val());
            savedata.Name = $("#CustomerName").val();
            savedata.BusinessId = $("#Business").val();
            savedata.BusinessName = $("#BusinessName").val();
            savedata.Address1 = $("#AddressLine1").val();
            savedata.Address2 = $("#AddressLine2").val();
            savedata.Address3 = $("#AddressLine3").val();
            savedata.CityId = parseInt($("#City").val());
            savedata.StateId = parseInt($("#State").val());
            savedata.Pincode = $("#PinCode").val();
            savedata.ContactPersonName = $("#ContactPersonName").val();
            savedata.Mobile = $("#ContactMobile").val();
            savedata.MobileAlternate = $("#AlternateMobile").val();
            savedata.Phone = $("#Phone").val();
            savedata.Email = $("#Email").val();
            savedata.Requirement = $("#Requirements").val();
            savedata.TotalFirm = parseInt($("#TotalFirms").val());
            savedata.CustomerType = $("#Type").val();
            savedata.AdharUID = $("#AadhaarId").val();
            savedata.TotalUsers = parseInt($("#TotalUsers").val());
            savedata.IsActive = $('#Active').is(':checked');
            savedata.AgreeTerms = true;

            blockUI('container');

            $.ajax({
                type: "POST",
                url: "@(Url.Action("SaveCustomer", "Admin"))",
                data: JSON.stringify(savedata),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    unblockUI('container');
                    if (data.result == RESULT_SUCCESS) {
                        fromReset();
                        showWarning("", 'Customer saved successfully.');
                        $("#Id").val(0);
                        refreshDatatableList();
                        $("#btnCancel").click();

                    } else {
                        showError("", data.data);
                    }
                },
                error: function (error) {
                    unblockUI('container');
                    showError("", error.statusText);
                }
            });

        }
        catch (e) {
            unblockUI('container');
            showError("", e.message);
        }

    }

    function customerDelete(id) {
        if (id == 0) {
            id = $('#Id').val();
        }
        try {
            blockUI('container');
            var retrundata = AjaxCall("Delete", "@(Url.Content("~/Admin/DeleteCustomer"))" + "/" + id, "",
                function (result) {
                    unblockUI('container');
                    var str = "";
                    try {
                        if (result.result == RESULT_SUCCESS) {
                            refreshDatatableList();
                        } else {
                            showError('Error', result.data); //warning,  success, error, info
                        }
                    } catch (e) {
                        showError('Error', e); //warning,  success, error, info
                    }
                },
                function (error) {
                    unblockUI('container');
                });
        }
        catch (err) {
            unblockUI('container');
        }
    }

    function getDetail(id) {
        try {
            blockUI('container');
            var retrundata = AjaxCall("Get", "@(Url.Content("~/Admin/GetCustomer"))" + "/" + id, "",
                function (result) {
                    unblockUI('container');
                    var str = "";
                    try {
                        if (result.result == RESULT_SUCCESS) {
                            $("#AddNew").click();
                            $("#activeTabName").text("EDIT(ID# "+result.data.id+")");
                            $('#Id').val(result.data.id);
                            $("#State").select2().val(result.data.stateId).trigger("change");
                            $("#CustomerName").val(result.data.name);
                            $("#Business").select2().val(result.data.businessId).trigger("change");
                            $("#AddressLine1").val(result.data.address1);
                            $("#AddressLine2").val(result.data.address2);
                            $("#AddressLine3").val(result.data.address3);
                            $("#PinCode").val(result.data.pincode);
                            $("#ContactPersonName").val(result.data.contactPersonName);
                            $("#ContactMobile").val(result.data.mobile);
                            $("#AlternateMobile").val(result.data.mobileAlternate);
                            $("#Phone").val(result.data.phone);
                            $("#Email").val(result.data.email);
                            $("#Requirements").val(result.data.requirement);
                            $("#TotalFirms").val(result.data.totalFirm);
                            $('#Active').prop('checked', result.data.isActive);
                            $("#AadhaarId").val(result.data.adharUID);
                            $("#TotalUsers").val(result.data.totalUsers);
                            $("#Type").val(result.data.customerType);
                            $("#BusinessName").val(result.data.businessName);
                            //$("#Type option:contains(" + result.data.customerType + ")").attr('selected', 'selected');
                            $("#Type").val(result.data.customerTypeValue)
                            $("#hdnCityId").val(result.data.cityId);

                        } else {
                            showError('Error', result.data); //warning,  success, error, info
                        }
                    } catch (e) {
                        unblockUI('container');
                        showError('Error', e); //warning,  success, error, info
                    }
                },
                function (error) {

                });
        }
        catch (err) {
        }
    }
</script>
}
